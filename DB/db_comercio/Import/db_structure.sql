-- MySQL dump 10.13  Distrib 8.0.26, for Win64 (x86_64)
--
-- Host: 127.0.0.1    Database: db_comercio
-- ------------------------------------------------------
-- Table structure for table `bairro`
set FOREIGN_KEY_CHECKS=0;

use heroku_72a407c7956ec68;
DROP TABLE IF EXISTS `bairro`;
CREATE TABLE `bairro` (
  `COD_BAIRRO` int NOT NULL AUTO_INCREMENT,
  `NME_BAIRRO` varchar(100) NOT NULL,
  `COD_MUNICIPIO` int DEFAULT NULL,
  PRIMARY KEY (`COD_BAIRRO`),
  KEY `FK_BAIRRO_MUNICIPIO_IDX` (`COD_MUNICIPIO`),
  KEY `IDX_BAIRRO` (`NME_BAIRRO`),
  CONSTRAINT `FK_BAIRRO_MUNICIPIO` FOREIGN KEY (`COD_MUNICIPIO`) REFERENCES `municipio` (`COD_MUNICIPIO`)
) ENGINE=InnoDB AUTO_INCREMENT=35193 DEFAULT CHARSET=latin1;

--
-- Table structure for table `categoria`
--

DROP TABLE IF EXISTS `categoria`;
CREATE TABLE `categoria` (
  `COD_CATEGORIA` int NOT NULL AUTO_INCREMENT,
  `NME_CATEGORIA` varchar(100) NOT NULL,
  PRIMARY KEY (`COD_CATEGORIA`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=latin1;

--
-- Table structure for table `endereco`
--

DROP TABLE IF EXISTS `endereco`;
CREATE TABLE `endereco` (
  `COD_ENDERECO` int NOT NULL,
  `DSC_COMPLEMENTO` varchar(255) DEFAULT NULL,
  `NRO_ENDERECO` int DEFAULT NULL,
  `DSC_PONTO_REFERENCIA` varchar(255) DEFAULT NULL,
  `COD_CEP` int DEFAULT NULL,
  `COD_PESSOA` int DEFAULT NULL,
  PRIMARY KEY (`COD_ENDERECO`),
  KEY `FK_ENDERECO_LOGRADOURO_idx` (`COD_CEP`),
  KEY `FK_ENDERECO_PESSOA_idx` (`COD_PESSOA`),
  CONSTRAINT `FK_ENDERECO_LOGRADOURO` FOREIGN KEY (`COD_CEP`) REFERENCES `logradouro` (`COD_CEP`),
  CONSTRAINT `FK_ENDERECO_PESSOA` FOREIGN KEY (`COD_PESSOA`) REFERENCES `pessoa` (`COD_PESSOA`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ;

--
-- Table structure for table `estado`
--

DROP TABLE IF EXISTS `estado`;
CREATE TABLE `estado` (
  `COD_ESTADO` int NOT NULL AUTO_INCREMENT,
  `NME_ESTADO` varchar(100) NOT NULL,
  `SGL_UF` varchar(2) NOT NULL,
  PRIMARY KEY (`COD_ESTADO`)
) ENGINE=InnoDB AUTO_INCREMENT=55 DEFAULT CHARSET=latin1;

--
-- Table structure for table `item_operacao`
--

DROP TABLE IF EXISTS `item_operacao`;
CREATE TABLE `item_operacao` (
  `COD_ITEM_OPERACAO` int NOT NULL AUTO_INCREMENT,
  `QTD_ITEM` float DEFAULT NULL,
  `VLR_ITEM` decimal(10,2) DEFAULT NULL,
  `COD_OPERACAO` int NOT NULL,
  `COD_PRODUTO` int NOT NULL,
  PRIMARY KEY (`COD_ITEM_OPERACAO`),
  KEY `FK_ITEM_COMPRA_IDX` (`COD_OPERACAO`),
  KEY `FK_ITEM_COMPRA_PRODUTO_IDX` (`COD_PRODUTO`),
  CONSTRAINT `FK_ITEM_COMPRA` FOREIGN KEY (`COD_OPERACAO`) REFERENCES `operacao` (`COD_OPERACAO`),
  CONSTRAINT `FK_ITEM_COMPRA_PRODUTO` FOREIGN KEY (`COD_PRODUTO`) REFERENCES `produto` (`COD_PRODUTO`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;

--
-- Table structure for table `logradouro`
--

DROP TABLE IF EXISTS `logradouro`;
CREATE TABLE `logradouro` (
  `COD_CEP` int NOT NULL AUTO_INCREMENT,
  `COD_BAIRRO` int NOT NULL,
  `DSC_LOGRADOURO` varchar(255) DEFAULT NULL,
  `DSC_COMPLEMENTO` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`COD_CEP`,`COD_BAIRRO`),
  KEY `FK_BAIRRO_ENDERECO_IDX` (`COD_BAIRRO`),
  CONSTRAINT `FK_BAIRRO_ENDERECO` FOREIGN KEY (`COD_BAIRRO`) REFERENCES `bairro` (`COD_BAIRRO`)
) ENGINE=InnoDB AUTO_INCREMENT=19990971 DEFAULT CHARSET=latin1;

--
-- Table structure for table `municipio`
--

DROP TABLE IF EXISTS `municipio`;
CREATE TABLE `municipio` (
  `COD_MUNICIPIO` int NOT NULL AUTO_INCREMENT,
  `NME_MUNICIPIO` varchar(100) NOT NULL,
  `COD_ESTADO` int NOT NULL,
  PRIMARY KEY (`COD_MUNICIPIO`),
  KEY `FK_MUNICIPIO_ESTADO_IDX` (`COD_ESTADO`),
  CONSTRAINT `FK_MUNICIPIO_ESTADO` FOREIGN KEY (`COD_ESTADO`) REFERENCES `estado` (`COD_ESTADO`)
) ENGINE=InnoDB AUTO_INCREMENT=3557304 DEFAULT CHARSET=latin1;

--
-- Table structure for table `operacao`
--

DROP TABLE IF EXISTS `operacao`;
CREATE TABLE `operacao` (
  `COD_OPERACAO` int NOT NULL AUTO_INCREMENT,
  `DTA_OPERACAO` datetime DEFAULT NULL,
  `COD_NOTA_FISCAL` varchar(30) DEFAULT NULL,
  `VLR_TOTAL` decimal(10,2) DEFAULT NULL,
  `QTD_PARCELA` int DEFAULT NULL,
  `TPO_STATUS` enum('P','O') DEFAULT NULL COMMENT 'P - pedido (compra ou venda); O - or√ßamento\\n',
  `COD_PESSOA` int DEFAULT NULL,
  `FLG_PAGO` tinyint DEFAULT NULL,
  `TPO_OPERACAO` enum('C','V') DEFAULT NULL COMMENT 'C - Compra; V - Venda',
  PRIMARY KEY (`COD_OPERACAO`),
  KEY `FK_OPERACAO_PESSOA_idx` (`COD_PESSOA`),
  CONSTRAINT `FK_OPERACAO_PESSOA` FOREIGN KEY (`COD_PESSOA`) REFERENCES `pessoa` (`COD_PESSOA`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1;

--
-- Table structure for table `pagamento_operacao`
--

DROP TABLE IF EXISTS `pagamento_operacao`;
CREATE TABLE `pagamento_operacao` (
  `COD_PAGAMENTO` int NOT NULL AUTO_INCREMENT,
  `VLR_PAGAMENTO` decimal(10,2) DEFAULT NULL,
  `DTA_PAGAMENTO` date DEFAULT NULL,
  `DTA_VENCIMENTO` date DEFAULT NULL,
  `COD_OPERACAO` int NOT NULL,
  `COD_TIPO_PAGAMENTO` int DEFAULT NULL,
  PRIMARY KEY (`COD_PAGAMENTO`),
  KEY `FK_PARCELA_COMPRA_IDX` (`COD_OPERACAO`),
  KEY `FK_TIPO_PAGAMENTO_OPERACAO__idx` (`COD_TIPO_PAGAMENTO`),
  CONSTRAINT `FK_PARCELA_COMPRA` FOREIGN KEY (`COD_OPERACAO`) REFERENCES `operacao` (`COD_OPERACAO`),
  CONSTRAINT `FK_TIPO_PAGAMENTO_OPERACAO_` FOREIGN KEY (`COD_TIPO_PAGAMENTO`) REFERENCES `tipo_pagamento` (`COD_TIPO_PAGAMENTO`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Table structure for table `pessoa`
--

DROP TABLE IF EXISTS `pessoa`;
CREATE TABLE `pessoa` (
  `COD_PESSOA` int NOT NULL AUTO_INCREMENT,
  `NME_PESSOA` varchar(45) NOT NULL,
  PRIMARY KEY (`COD_PESSOA`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=latin1 ;


--
-- Table structure for table `pessoa_fisica`
--

DROP TABLE IF EXISTS `pessoa_fisica`;
CREATE TABLE `pessoa_fisica` (
  `COD_PESSOA` int NOT NULL AUTO_INCREMENT,
  `SGL_UF_NATURALIDADE` char(2) DEFAULT NULL,
  `DTA_NASCIMENTO` date NOT NULL,
  `TPO_SEXO` char(1) DEFAULT NULL COMMENT 'M - MASCULINO; F - FEMININO; N - NEUTRO',
  PRIMARY KEY (`COD_PESSOA`),
  KEY `FK_PESSOA_FISICA_PESSOA_IDX` (`COD_PESSOA`),
  CONSTRAINT `FK_PESSOA_FISICA` FOREIGN KEY (`COD_PESSOA`) REFERENCES `pessoa` (`COD_PESSOA`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=latin1;

--
-- Table structure for table `pessoa_juridica`
--

DROP TABLE IF EXISTS `pessoa_juridica`;
CREATE TABLE `pessoa_juridica` (
  `COD_PESSOA` int NOT NULL AUTO_INCREMENT,
  `NME_RAZAO_SOCIAL` varchar(200) NOT NULL,
  `COD_CNPJ` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`COD_PESSOA`),
  KEY `FK_PESSOA_JURIDICA_PESSOA_IDX` (`COD_PESSOA`),
  CONSTRAINT `FK_PESSOA_JURIDICA` FOREIGN KEY (`COD_PESSOA`) REFERENCES `pessoa` (`COD_PESSOA`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=latin1;

--
-- Table structure for table `produto`
--

DROP TABLE IF EXISTS `produto`;
CREATE TABLE `produto` (
  `COD_PRODUTO` int NOT NULL AUTO_INCREMENT,
  `NME_PRODUTO` varchar(95) DEFAULT NULL,
  `DSC_PRODUTO` varchar(255) DEFAULT NULL,
  `COD_SUBCATEGORIA` int DEFAULT NULL,
  `COD_UNIDADE_MEDIDA` int DEFAULT NULL,
  PRIMARY KEY (`COD_PRODUTO`),
  KEY `FK_PRODUTO_SUBCATEGORIA_IDX` (`COD_SUBCATEGORIA`),
  KEY `FK_PRODUTO_UNIDADE_MEDIDA_IDX` (`COD_UNIDADE_MEDIDA`),
  CONSTRAINT `FK_PRODUTO_SUBCATEGORIA` FOREIGN KEY (`COD_SUBCATEGORIA`) REFERENCES `subcategoria` (`COD_SUBCATEGORIA`),
  CONSTRAINT `FK_PRODUTO_UNIDADE_MEDIDA` FOREIGN KEY (`COD_UNIDADE_MEDIDA`) REFERENCES `unidade_medida` (`COD_UNIDADE_MEDIDA`)
) ENGINE=InnoDB AUTO_INCREMENT=216546535 DEFAULT CHARSET=latin1;


--
-- Table structure for table `subcategoria`
--

DROP TABLE IF EXISTS `subcategoria`;
CREATE TABLE `subcategoria` (
  `COD_SUBCATEGORIA` int NOT NULL AUTO_INCREMENT,
  `NME_SUBCATEGORIA` varchar(95) DEFAULT NULL,
  `COD_CATEGORIA` int DEFAULT NULL,
  PRIMARY KEY (`COD_SUBCATEGORIA`),
  KEY `FK_SUBCATEGORIA_CATEGORA_IDX` (`COD_CATEGORIA`),
  CONSTRAINT `FK_SUBCATEGORIA_CATEGORA` FOREIGN KEY (`COD_CATEGORIA`) REFERENCES `categoria` (`COD_CATEGORIA`)
) ENGINE=InnoDB AUTO_INCREMENT=24 DEFAULT CHARSET=latin1;

--
-- Table structure for table `tipo_pagamento`
--

DROP TABLE IF EXISTS `tipo_pagamento`;
CREATE TABLE `tipo_pagamento` (
  `COD_TIPO_PAGAMENTO` int NOT NULL AUTO_INCREMENT,
  `NME_TIPO_PAGAMENTO` varchar(90) DEFAULT NULL,
  PRIMARY KEY (`COD_TIPO_PAGAMENTO`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=latin1;

--
-- Table structure for table `unidade_medida`
--

DROP TABLE IF EXISTS `unidade_medida`;
CREATE TABLE `unidade_medida` (
  `COD_UNIDADE_MEDIDA` int NOT NULL AUTO_INCREMENT,
  `NME_UNIDADE_MEDIDA` varchar(100) DEFAULT NULL,
  `SGL_UNIDADE_MEDIDA` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`COD_UNIDADE_MEDIDA`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=latin1;

--
-- Table structure for table `usuario`
--

DROP TABLE IF EXISTS `usuario`;
CREATE TABLE `usuario` (
  `COD_USUARIO` int NOT NULL AUTO_INCREMENT,
  `DSC_LOGIN` varchar(20) DEFAULT NULL,
  `DSC_SENHA` varchar(128) DEFAULT NULL,
  `FLG_ATIVO` tinyint DEFAULT NULL,
  `COD_PESSOA` int DEFAULT NULL,
  PRIMARY KEY (`COD_USUARIO`),
  UNIQUE KEY `DSC_LOGIN_UNIQUE` (`DSC_LOGIN`),
  KEY `FK_USUARIO_PESSOA` (`COD_PESSOA`),
  CONSTRAINT `FK_USUARIO_PESSOA` FOREIGN KEY (`COD_PESSOA`) REFERENCES `pessoa` (`COD_PESSOA`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=latin1;
set FOREIGN_KEY_CHECKS=1;